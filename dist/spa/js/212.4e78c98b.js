"use strict";(self["webpackChunkrupay_front"]=self["webpackChunkrupay_front"]||[]).push([[212],{15212:(a,e,l)=>{l.r(e),l.d(e,{default:()=>B});var t=l(59835),n=l(60499),s=l(86970),u=l(39981),r=l.n(u),o=l(46190),d=l(99407),i=l(98030),c=l(87270),p=l(23459),v=l(17779);const g={class:"marketplace"},w={class:"container"},m=(0,t._)("h3",{class:"game__heading"},[(0,t.Uk)("Chicken Bro"),(0,t._)("br"),(0,t._)("span",{class:"text-primary"},"Играй и зарабатывай!")],-1),y={key:0},k={key:1},f={key:2,style:{"max-width":"500px"}},_=(0,t._)("p",null,"Пополнить внутриигровой баланс",-1),b={key:1},h={name:"ChikenBro",setup(a){const e="http://127.0.0.1:8000",l=(0,o.c)(),u=(0,p.Q)();let h=(0,n.iH)(!1),q=(0,n.iH)(!1),U=(0,n.iH)(null),S=(0,n.iH)(null);const C=(0,n.iH)({amount:0,address:"73SB6ZgqkhX98WnqZRRNxhd9XGtmas2Btb",title:"Пополнение баланса игры",message:"Пополнение баланса игры",encrypted:!1,fee:0,raw:0}),F=(0,t.Fl)((()=>{try{return l.addresses[l.currentAddressIdx].address}catch(a){return!1}}));async function x(){q.value=!q.value;const a=!0,e=await u.getKeyPair(),l=new d.EraChain.Type.KeyPair(e),t={assetKey:"1048580",amount:C.value.amount};v.log(l),v.log(t);const n=await i.era.tranRawSendAsset(l,t,C.value.address,C.value.title,C.value.message,C.value.encrypted,a);v.log(n),n.error?(0,c.d)("negative",n.error.message):(C.value.fee=n.fee,C.value.raw=n.raw),q.value=!q.value}async function B(){q.value=!q.value;const a=await i.era.broadcast64(C.value.raw);if(v.log(a),a.error)(0,c.d)("negative",a.message);else{(0,c.d)("info","Транзакция создана");const l=await r().post(e+"/api/user/add_to_balance",{wallet:U.value.wallet,signature:a.signature});if(v.log(l.data),l.data.success){const a=await r().get(e+`/api/user/get_user?wallet=${F.value}`);U.value=a.data;const l=await r().get(`https://scan.rupay.pro/api/addressassetbalance/${a.data.wallet}/1048580`);S.value=l.data[0][1]}}q.value=!q.value}return(0,t.wF)((async()=>{if(F.value){const a=await r().get(e+`/api/user/get_user?wallet=${F.value}`);if(v.log(a.data.wallet),a.data.wallet){h.value=!0,U.value=a.data;const e=await r().get(`https://scan.rupay.pro/api/addressassetbalance/${a.data.wallet}/1048580`);S.value=e.data[0][1]}}})),(a,e)=>{const l=(0,t.up)("q-input"),u=(0,t.up)("q-btn"),r=(0,t.up)("q-page");return(0,t.wg)(),(0,t.j4)(r,{padding:""},{default:(0,t.w5)((()=>[(0,t._)("section",g,[(0,t._)("div",w,[m,(0,n.SU)(F)?(0,t.kq)("",!0):((0,t.wg)(),(0,t.iD)("p",y,"Вы не вошли в кошелек RUPAY")),(0,n.SU)(h)?(0,t.kq)("",!0):((0,t.wg)(),(0,t.iD)("p",k,"У ван нет аккаунта в игре")),(0,n.SU)(h)?((0,t.wg)(),(0,t.iD)("div",f,[(0,t._)("p",null,"Ваш внутриигровой баланс: "+(0,s.zw)((0,n.SU)(U).balance),1),(0,t._)("p",null,"Ваш баланс токенов в сети RUPAY: "+(0,s.zw)((0,n.SU)(S)),1),_,(0,t.Wm)(l,{outlined:"",modelValue:C.value.amount,"onUpdate:modelValue":e[0]||(e[0]=a=>C.value.amount=a),class:"q-mb-md",type:"number"},null,8,["modelValue"]),0===C.value.fee?((0,t.wg)(),(0,t.j4)(u,{key:0,"no-caps":"",unelevated:"",rounded:"",label:"Узнать комиссию",disable:parseFloat(C.value.amount)<=0||parseFloat(C.value.amount)>=parseFloat((0,n.SU)(S)),color:"primary",onClick:x,loading:(0,n.SU)(q)},null,8,["disable","loading"])):(0,t.kq)("",!0),C.value.fee>0?((0,t.wg)(),(0,t.iD)("p",b,"газ "+(0,s.zw)(C.value.fee)+" OLF",1)):(0,t.kq)("",!0),C.value.fee>0?((0,t.wg)(),(0,t.j4)(u,{key:2,"no-caps":"",unelevated:"",rounded:"",label:"Подтвердить",color:"primary",onClick:B,loading:(0,n.SU)(q)},null,8,["loading"])):(0,t.kq)("",!0)])):(0,t.kq)("",!0)])])])),_:1})}}};var q=l(69885),U=l(13119),S=l(24455),C=l(69984),F=l.n(C);const x=h,B=x;F()(h,"components",{QPage:q.Z,QInput:U.Z,QBtn:S.Z})}}]);