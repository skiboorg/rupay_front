"use strict";(self["webpackChunkrupay_front"]=self["webpackChunkrupay_front"]||[]).push([[1347],{21347:(e,l,a)=>{a.r(l),a.d(l,{default:()=>H});var u=a(59835),t=a(60499),n=a(86970),o=a(23459),s=a(46190),d=a(31655),p=a(91569),m=a(87270),i=a(18910),r=a(17779);const v=(0,u._)("div",{class:"",style:{height:"50px"}},null,-1),c=["src"],_={key:0},b={key:1},w={class:"text-caption"},y={key:0,class:"text-caption text-negative"},f={key:2},q={name:"NewBuyOffer",setup(e){const l=(0,o.Q)(),q=(0,s.c)(),V=(0,t.iH)(null),g=(0,i.tv)();let k=a(24409);const W=(0,d.T)(),h=(0,t.iH)(null),F=(0,t.iH)(null),x=(0,t.iH)(1),U=(0,t.iH)(null),Q=(0,t.iH)(null),Z=((0,u.Fl)((()=>q.addresses[q.currentAddressIdx].address)),(0,u.Fl)((()=>W.user))),H=(0,u.Fl)((()=>k.orderBy(l.assets,["id"])));(0,u.Fl)((()=>q.balances));async function I(){r.log(h.value);const e=await p.h.post("/api/p2p/add_offer",{is_sell:!1,asset_key:h.value.key,wallet:Z.value.wallet,amount:F.value,min_amount:x.value,payment_types:V.value,course:U.value,rules:Q.value});e.data.success?(0,m.d)("positive",e.data.message):(0,m.d)("negative",e.data.message),await W.get_own_offers(),g.push({name:"p2p_index"})}return(e,l)=>{const a=(0,u.up)("page-header"),o=(0,u.up)("q-avatar"),s=(0,u.up)("q-item-section"),d=(0,u.up)("q-item-label"),p=(0,u.up)("q-item"),m=(0,u.up)("q-select"),i=(0,u.up)("q-input"),r=(0,u.up)("q-btn"),q=(0,u.up)("page-body"),g=(0,u.up)("page");return(0,u.wg)(),(0,u.j4)(g,null,{default:(0,u.w5)((()=>[(0,u.Wm)(q,{class:"q-pa-md"},{default:(0,u.w5)((()=>[(0,u.Wm)(a,{route_name:"p2p_index"}),v,(0,u.Wm)(m,{outlined:"",rounded:"",options:(0,t.SU)(H).filter((e=>e.is_in_p2p)),modelValue:h.value,"onUpdate:modelValue":l[0]||(l[0]=e=>h.value=e),"option-label":"name",class:"q-mb-md",behavior:"menu",label:"Выберите актив для покупки"},{option:(0,u.w5)((e=>[(0,u.Wm)(p,(0,n.vs)((0,u.F4)(e.itemProps)),{default:(0,u.w5)((()=>[(0,u.Wm)(s,{avatar:""},{default:(0,u.w5)((()=>[(0,u.Wm)(o,null,{default:(0,u.w5)((()=>[(0,u._)("img",{src:e.opt.icon},null,8,c)])),_:2},1024)])),_:2},1024),(0,u.Wm)(s,null,{default:(0,u.w5)((()=>[(0,u.Wm)(d,{class:"text-bold"},{default:(0,u.w5)((()=>[(0,u.Uk)((0,n.zw)(e.opt.name),1)])),_:2},1024)])),_:2},1024)])),_:2},1040)])),_:1},8,["options","modelValue"]),h.value?((0,u.wg)(),(0,u.iD)("div",_,[(0,u.Wm)(m,{outlined:"",rounded:"",options:(0,t.SU)(Z).payment_types,modelValue:V.value,"onUpdate:modelValue":l[1]||(l[1]=e=>V.value=e),"use-chips":"",class:"q-mb-md",behavior:"menu",multiple:"",label:"Выберите платежные ситемы"},null,8,["options","modelValue"])])):(0,u.kq)("",!0),V.value&&V.value.length>0?((0,u.wg)(),(0,u.iD)("div",b,[(0,u.Wm)(i,{outlined:"",rounded:"",modelValue:F.value,"onUpdate:modelValue":l[2]||(l[2]=e=>F.value=e),class:"q-mb-md",type:"number",label:"Введите обьем оффера"},null,8,["modelValue"]),(0,u.Wm)(i,{outlined:"",rounded:"",modelValue:x.value,"onUpdate:modelValue":l[3]||(l[3]=e=>x.value=e),class:"q-mb-md",type:"number",label:"Введите минимальный обьем сделки"},null,8,["modelValue"]),(0,u._)("p",w,"Текущий курс: "+(0,n.zw)(h.value.course),1),parseFloat(h.value.p2p_min_buy_price)>0?((0,u.wg)(),(0,u.iD)("p",y,"Минимальный цена покупки: "+(0,n.zw)(h.value.p2p_min_buy_price),1)):(0,u.kq)("",!0),(0,u.Wm)(i,{outlined:"",rounded:"",modelValue:U.value,"onUpdate:modelValue":l[4]||(l[4]=e=>U.value=e),class:"q-mb-md",type:"number",label:"Введите курс покупки в рублях"},null,8,["modelValue"]),(0,u.Wm)(i,{outlined:"",rounded:"",modelValue:Q.value,"onUpdate:modelValue":l[5]||(l[5]=e=>Q.value=e),class:"q-mb-md",type:"textarea",label:"Введите условия покупки"},null,8,["modelValue"])])):(0,u.kq)("",!0),F.value&&x.value&&U.value?((0,u.wg)(),(0,u.iD)("div",f,[(0,u.Wm)(r,{dense:"",class:"full-width q-py-md",color:"positive","no-caps":"",unelevated:"",disable:!F.value||parseFloat(x.value)>parseFloat(F.value)||parseFloat(U.value)<parseFloat(h.value.p2p_min_buy_price),onClick:I,rounded:"",label:`Создать оффер на ${F.value*U.value} руб`},null,8,["disable","label"])])):(0,u.kq)("",!0)])),_:1})])),_:1})}}};var V=a(18401),g=a(490),k=a(76749),W=a(61357),h=a(33115),F=a(13119),x=a(24455),U=a(69984),Q=a.n(U);const Z=q,H=Z;Q()(q,"components",{QSelect:V.Z,QItem:g.Z,QItemSection:k.Z,QAvatar:W.Z,QItemLabel:h.Z,QInput:F.Z,QBtn:x.Z})}}]);