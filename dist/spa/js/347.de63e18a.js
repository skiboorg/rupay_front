"use strict";(self["webpackChunkrupay_front"]=self["webpackChunkrupay_front"]||[]).push([[347],{21347:(e,l,a)=>{a.r(l),a.d(l,{default:()=>W});var u=a(59835),d=a(60499),n=a(86970),o=a(23459),t=a(46190),s=a(31655),m=a(91569),p=a(87270),i=a(18910),v=a(17779);const r=(0,u._)("div",{class:"",style:{height:"50px"}},null,-1),c={key:0},b={key:1},y={class:"text-caption"},V={key:2},_={name:"NewBuyOffer",setup(e){const l=(0,o.Q)(),_=(0,t.c)(),g=(0,d.iH)(null),w=(0,i.tv)();let f=a(24409);const q=(0,s.T)(),k=(0,d.iH)(null),h=(0,d.iH)(null),W=(0,d.iH)(1),U=(0,d.iH)(null),x=(0,d.iH)(null),F=((0,u.Fl)((()=>_.addresses[_.currentAddressIdx].address)),(0,u.Fl)((()=>q.user))),H=(0,u.Fl)((()=>f.orderBy(l.assets,["id"])));(0,u.Fl)((()=>_.balances));async function Q(){v.log(k.value);const e=await m.h.post("/api/p2p/add_offer",{is_sell:!1,asset_key:k.value.key,wallet:F.value.wallet,amount:h.value,min_amount:W.value,payment_types:g.value,course:U.value,rules:x.value});e.data.success?(0,p.d)("positive",e.data.message):(0,p.d)("negative",e.data.message),await q.get_own_offers(),w.push({name:"p2p_index"})}return(e,l)=>{const a=(0,u.up)("page-header"),o=(0,u.up)("q-select"),t=(0,u.up)("q-input"),s=(0,u.up)("q-btn"),m=(0,u.up)("page-body"),p=(0,u.up)("page");return(0,u.wg)(),(0,u.j4)(p,null,{default:(0,u.w5)((()=>[(0,u.Wm)(m,{class:"q-pa-md"},{default:(0,u.w5)((()=>[(0,u.Wm)(a,{route_name:"p2p_index"}),r,(0,u.Wm)(o,{outlined:"",rounded:"",options:(0,d.SU)(H),modelValue:k.value,"onUpdate:modelValue":l[0]||(l[0]=e=>k.value=e),"option-label":"name",class:"q-mb-md",behavior:"dialog",label:"Выберите актив для покупки"},null,8,["options","modelValue"]),k.value?((0,u.wg)(),(0,u.iD)("div",c,[(0,u.Wm)(o,{outlined:"",rounded:"",options:(0,d.SU)(F).payment_types,modelValue:g.value,"onUpdate:modelValue":l[1]||(l[1]=e=>g.value=e),class:"q-mb-md",behavior:"dialog",multiple:"",label:"Выберите платежные ситемы"},null,8,["options","modelValue"])])):(0,u.kq)("",!0),g.value&&g.value.length>0?((0,u.wg)(),(0,u.iD)("div",b,[(0,u.Wm)(t,{outlined:"",rounded:"",modelValue:h.value,"onUpdate:modelValue":l[2]||(l[2]=e=>h.value=e),class:"q-mb-md",type:"number",label:"Введите обьем оффера"},null,8,["modelValue"]),(0,u.Wm)(t,{outlined:"",rounded:"",modelValue:W.value,"onUpdate:modelValue":l[3]||(l[3]=e=>W.value=e),class:"q-mb-md",type:"number",label:"Введите минимальный обьем сделки"},null,8,["modelValue"]),(0,u._)("p",y,"Текущий курс: "+(0,n.zw)(k.value.course),1),(0,u.Wm)(t,{outlined:"",rounded:"",modelValue:U.value,"onUpdate:modelValue":l[4]||(l[4]=e=>U.value=e),class:"q-mb-md",type:"number",label:"Введите курс покупки в рублях"},null,8,["modelValue"]),(0,u.Wm)(t,{outlined:"",rounded:"",modelValue:x.value,"onUpdate:modelValue":l[5]||(l[5]=e=>x.value=e),class:"q-mb-md",type:"textarea",label:"Введите условия покупки"},null,8,["modelValue"])])):(0,u.kq)("",!0),h.value&&W.value&&U.value?((0,u.wg)(),(0,u.iD)("div",V,[(0,u.Wm)(s,{dense:"",class:"full-width q-py-md",color:"positive","no-caps":"",unelevated:"",disable:!h.value||parseFloat(W.value)>parseFloat(h.value),onClick:Q,rounded:"",label:`Создать оффер на ${h.value*U.value} руб`},null,8,["disable","label"])])):(0,u.kq)("",!0)])),_:1})])),_:1})}}};var g=a(18401),w=a(13119),f=a(24455),q=a(69984),k=a.n(q);const h=_,W=h;k()(_,"components",{QSelect:g.Z,QInput:w.Z,QBtn:f.Z})}}]);