"use strict";(self["webpackChunkrupay_front"]=self["webpackChunkrupay_front"]||[]).push([[212],{15212:(e,a,l)=>{l.r(a),l.d(a,{default:()=>$});var t=l(59835),s=l(60499),n=l(86970),u=l(39981),o=l.n(u),i=l(46190),r=l(99407),d=l(98030),c=l(87270),v=l(23459),p=l(17779);const m={class:"marketplace"},g={class:"container"},w=(0,t._)("h3",{class:"game__heading"},[(0,t.Uk)("Chicken Bro"),(0,t._)("br"),(0,t._)("span",{class:"text-primary"},"Играй и зарабатывай!")],-1),f={key:0},y={key:1},b={key:0,style:{"max-width":"500px"},class:"relative-position"},_=(0,t._)("p",{class:"text-h6 text-primary text-bold"},"Регистрация аккаунта",-1),h=(0,t._)("p",{class:"text-primary text-ub text-outline text-body1"},"Ваше имя*",-1),k=(0,t._)("p",{class:"text-primary text-ub text-outline text-body1"},"Ваш E-mail*",-1),x=(0,t._)("p",{class:"text-primary text-ub text-outline text-body1"},"Реферальный код",-1),U={key:1,style:{"max-width":"500px"}},q={key:2,class:"q-mb-lg",style:{"max-width":"500px"}},S=(0,t._)("p",null,"Пополнить внутриигровой баланс",-1),V={key:1},z={key:3,style:{border:"none"},src:"https://astraz.ru",width:"100%",height:"800"},H={name:"ChikenBro",setup(e){const a="https://astraz.ru",l=(0,i.c)(),u=(0,v.Q)();let H=(0,s.iH)(!1);const C=(0,s.iH)(!1),D=(0,s.iH)(!1);let W=(0,s.iH)({balance:0}),A=(0,s.iH)(null),P=(0,s.iH)({email_re:/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/,is_loading:!1,isPwd:!0}),Z=(0,s.iH)({wallet:null,password:null,email:null,reffer_code:null,fio:null});const F=(0,s.iH)({amount:0,address:"7NBHJjDugvtNq9GsMMcwcbx7yNMAn47fLH",title:"Пополнение баланса игры",message:"Пополнение баланса игры",encrypted:!1,fee:0,raw:0}),Q=(0,t.Fl)((()=>{try{return l.addresses[l.currentAddressIdx].address}catch(e){return!1}}));(0,t.wF)((async()=>{if(Q.value){const e=await o().get(a+`/api/user/get_user?wallet=${Q.value}`);if(p.log(e.data.wallet),e.data.wallet){H.value=!0,W.value=e.data;const a=await o().get(`https://scan.rupay.pro/api/addressassetbalance/${e.data.wallet}/1048580`);A.value=a.data[0][1]}}}));const $=()=>{Z.value.email=Z.value.email.toLowerCase()};async function j(){D.value=!D.value,P.value.email_re.test(String(Z.value.email))?C.value=!0:((0,c.d)("negative","Адрес E-mail некоректный"),C.value=!1),Z.value.fio||((0,c.d)("negative","Введите Ваше имя"),C.value=!1),D.value=!D.value}async function B(e){D.value=!D.value,Z.value.password=e,$(),p.log(Z.value.password),o().post(a+"/auth/users/",{email:Z.value.email,password:Z.value.password,wallet:Q.value,reffer_code:Z.value.reffer_code,fio:Z.value.fio}).then((async e=>{(0,c.d)("positive","Регистрация прошла успешно");const l=await o().get(a+`/api/user/get_user?wallet=${Q.value}`);W.value=l.data;const t=await o().get(`https://scan.rupay.pro/api/addressassetbalance/${e.data.wallet}/1048580`);A.value=t.data[0][1],H.value=!0})).catch((e=>{e.response&&(0,c.d)("negative",JSON.stringify(e.response.data))})),D.value=!D.value}async function L(){D.value=!D.value;const e=!0,a=await u.getKeyPair();p.log(u.seed);const l=new r.EraChain.Type.KeyPair(a),t={assetKey:"1048580",amount:F.value.amount};p.log(l),p.log(t);const s=await d.era.tranRawSendAsset(l,t,F.value.address,F.value.title,F.value.message,F.value.encrypted,e);p.log(s),s.error?(0,c.d)("negative",s.error.message):(F.value.fee=s.fee,F.value.raw=s.raw),D.value=!D.value}async function N(){D.value=!D.value;const e=await o().get(a+"/api/data/settings");if(e.data.is_can_change_balance){const e=await d.era.broadcast64(F.value.raw);if(p.log(e),e.error)(0,c.d)("negative",e.message);else{(0,c.d)("info","Транзакция создана");const l=await o().post(a+"/api/user/add_to_balance",{wallet:W.value.wallet,signature:e.signature});if(p.log(l.data),l.data.success){const e=await o().get(a+`/api/user/get_user?wallet=${Q.value}`);W.value=e.data}}}else(0,c.d)("negative","Сервер занят. Повторите попытку через пару минут");D.value=!D.value}return(e,a)=>{const l=(0,t.up)("q-spinner"),o=(0,t.up)("q-inner-loading"),i=(0,t.up)("q-input"),r=(0,t.up)("q-btn"),d=(0,t.up)("pin-code"),c=(0,t.up)("q-page");return(0,t.wg)(),(0,t.j4)(c,{padding:""},{default:(0,t.w5)((()=>[(0,t._)("section",m,[(0,t._)("div",g,[w,(0,s.SU)(Q)&&(0,s.SU)(u).seed?(0,t.kq)("",!0):((0,t.wg)(),(0,t.iD)("p",f,"Вы не вошли в кошелек RUPAY")),(0,s.SU)(Q)&&!(0,s.SU)(H)?((0,t.wg)(),(0,t.iD)("div",y,[C.value?(0,t.kq)("",!0):((0,t.wg)(),(0,t.iD)("div",b,[(0,t.Wm)(o,{showing:D.value,class:"z-max"},{default:(0,t.w5)((()=>[(0,t.Wm)(l,{size:"50px",color:"primary"})])),_:1},8,["showing"]),_,h,(0,t.Wm)(i,{clearable:"",rounded:"",outlined:"","bg-color":"white",color:"negative",class:"full-width q-mb-md",modelValue:(0,s.SU)(Z).fio,"onUpdate:modelValue":a[0]||(a[0]=e=>(0,s.SU)(Z).fio=e)},null,8,["modelValue"]),k,(0,t.Wm)(i,{clearable:"",rounded:"",outlined:"","bg-color":"white",color:"negative",class:"full-width q-mb-md",modelValue:(0,s.SU)(Z).email,"onUpdate:modelValue":a[1]||(a[1]=e=>(0,s.SU)(Z).email=e)},null,8,["modelValue"]),x,(0,t.Wm)(i,{clearable:"",rounded:"",outlined:"","bg-color":"white",color:"negative",class:"full-width q-mb-md",modelValue:(0,s.SU)(Z).reffer_code,"onUpdate:modelValue":a[2]||(a[2]=e=>(0,s.SU)(Z).reffer_code=e)},null,8,["modelValue"]),(0,t.Wm)(r,{onClick:j,label:"Продолжить",color:"primary",unelevated:"","no-caps":"",size:"18px",rounded:""})])),C.value?((0,t.wg)(),(0,t.iD)("div",U,[(0,t.Wm)(d,{showDigits:!0,onPincode_ready:B})])):(0,t.kq)("",!0)])):(0,t.kq)("",!0),(0,s.SU)(Q)&&(0,s.SU)(u).seed?((0,t.wg)(),(0,t.iD)("div",q,[(0,t._)("p",null,"Ваш внутриигровой баланс: "+(0,n.zw)((0,s.SU)(W).balance),1),(0,t._)("p",null,"Ваш баланс токенов в сети RUPAY: "+(0,n.zw)((0,s.SU)(A)),1),S,(0,t.Wm)(i,{rounded:"",outlined:"",modelValue:F.value.amount,"onUpdate:modelValue":a[3]||(a[3]=e=>F.value.amount=e),class:"q-mb-md",type:"number"},null,8,["modelValue"]),0===F.value.fee?((0,t.wg)(),(0,t.j4)(r,{key:0,"no-caps":"",unelevated:"",rounded:"",label:"Узнать комиссию",disable:parseFloat(F.value.amount)<=0||parseFloat(F.value.amount)>=parseFloat((0,s.SU)(A)),color:"primary",onClick:L,loading:D.value},null,8,["disable","loading"])):(0,t.kq)("",!0),F.value.fee>0?((0,t.wg)(),(0,t.iD)("p",V,"газ "+(0,n.zw)(F.value.fee)+" OLF",1)):(0,t.kq)("",!0),F.value.fee>0?((0,t.wg)(),(0,t.j4)(r,{key:2,"no-caps":"",unelevated:"",rounded:"",label:"Подтвердить",color:"primary",onClick:N,loading:D.value},null,8,["loading"])):(0,t.kq)("",!0)])):(0,t.kq)("",!0),(0,s.SU)(H)?((0,t.wg)(),(0,t.iD)("iframe",z)):(0,t.kq)("",!0)])])])),_:1})}}};var C=l(69885),D=l(60854),W=l(63940),A=l(13119),P=l(24455),Z=l(69984),F=l.n(Z);const Q=H,$=Q;F()(H,"components",{QPage:C.Z,QInnerLoading:D.Z,QSpinner:W.Z,QInput:A.Z,QBtn:P.Z})}}]);