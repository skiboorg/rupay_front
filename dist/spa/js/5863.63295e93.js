"use strict";(self["webpackChunkrupay_front"]=self["webpackChunkrupay_front"]||[]).push([[5863],{75008:(e,t,a)=>{a.d(t,{C:()=>o,d:()=>l});var n=a(13433),s=a(17779);const l=({seed:e,password:t})=>{const a={status:!0,seed:e},s=n.createCipher("aes192",t);return s.update(JSON.stringify(a),"utf8","hex")+s.final("hex")},o=({hash:e,password:t})=>{try{const a=n.createDecipher("aes192",t),s=a.update(e,"hex","utf8")+a.final("utf8"),l=JSON.parse(s);return!!l.status&&l.seed}catch(a){return s.log(a),!1}}},85863:(e,t,a)=>{a.r(t),a.d(t,{default:()=>X});var n=a(59835);const s=(0,n._)("section",{class:""},[(0,n._)("div",{class:"container"},[(0,n._)("div",{class:"main-grid"},[(0,n._)("div",{class:"main-grid__text_top"},[(0,n._)("h3",{class:"main-grid__text_top_heading"},[(0,n._)("span",null,"Блокчейн "),(0,n._)("br"),(0,n.Uk)(" платформа. ")]),(0,n._)("p",{class:"main-grid__text_top_paragraph"}," Данный сайт является WEB-клиентом блокчейн-платформы RUpay. ")]),(0,n._)("div",{class:"auth-card text-center"},[(0,n._)("img",{class:"q-mb-lg",src:"https://app.rupay.pro/img/logo.ee83538b.png"}),(0,n._)("p",{class:"text-h5 text-bold text-center"},"Технические работы")])])])],-1);function l(e,t,a,l,o,i){const r=(0,n.up)("q-page");return(0,n.wg)(),(0,n.j4)(r,{padding:""},{default:(0,n.w5)((()=>[s])),_:1})}a(46727);var o=a(60499),i=a(87270),r=a(75008),u=a(18910),c=a(96928),d=a(43463),g=a(7363),p=a(99407),v=a(23459),m=(a(98030),a(46190)),_=a(31655),w=a(17779);(0,v.Q)();const f=(0,m.c)(),h=(0,_.T)(),y=(0,n.Fl)((()=>f.verifyPersonData?f.verifyPersonData:{name:null})),x=new Audio("notify.mp3"),b=(0,g.Q_)("ws",(()=>{let e=null;async function t(t){return w.log(y.value),e=new WebSocket("wss://xn--k1affs.xn--p1ai/ws/user/online"),e.onopen=()=>{w.log("ws connected",t);const a=localStorage.getItem("is_ref");w.log("is_ref",a);let n=!1;a&&(n=!0),e.send(JSON.stringify({wallet:t,fio:y.value.name,is_ref:n})),e.onmessage=async e=>{w.log("message",JSON.parse(e.data));let t=JSON.parse(e.data);if("update_user_notifications"===t.event&&(await h.get_notifications(),x.play()),"update_trade"===t.event){let e=t.message;w.log(h.current_trade_uid),await h.get_notifications(),h.current_trade_uid===e&&"freeze"===t.event_id&&(0,i.d)("positive",h.trade.asset_amount)}}},Promise.resolve("Success")}return{connectWS:t}})),k={key:0},S={key:0,class:"flex column justify-between"},q={class:""},H={key:1,class:"pincode-tab"},D={name:"Login",emits:["seedGood"],setup(e,{emit:t}){const a=(0,u.tv)(),s=(0,c.t)(),l=(0,d.s)(),g=b(),p=(0,o.iH)(""),v=(0,o.iH)(""),m=((0,o.iH)(!0),localStorage.getItem("hash"));async function _(e){const t=(0,r.C)({hash:m,password:e});t?(p.value=t,await w()):(0,i.d)("negative","Неверный пинкод")}async function w(){l.toggleLoadingState();const e=(0,r.d)({seed:p.value,password:v.value});await s.login(p.value,e);const t=localStorage.getItem("addresses");await g.connectWS(JSON.parse(t)[0].address),l.toggleLoadingState(),await a.push({name:"wallet_index"})}async function f(e){v.value=e,await w()}async function h(){await s.logout()}function y(e){const a=/^[A-Za-z0-9]+$/;return!!a.test(e)&&(t("seedGood",{val:[43,44,86,87,88].includes(e.length)}),[43,44,86,87,88].includes(e.length))}return(e,t)=>{const a=(0,n.up)("q-input"),s=(0,n.up)("pin-code"),l=(0,n.up)("q-btn");return(0,o.SU)(m)?((0,n.wg)(),(0,n.iD)("div",H,[(0,n.Wm)(s,{showDigits:!1,onPincode_ready:_}),(0,n.Wm)(l,{rounded:"","no-caps":"",outline:"",flat:"",class:"full-width q-mt-md",onClick:h,size:"14px",dense:"",color:"negative",label:"Я забыл пин-код. Сбросить все данные"})])):((0,n.wg)(),(0,n.iD)("div",k,[(0,n.Wm)(a,{autofocus:"",outlined:"",rounded:"",modelValue:p.value,"onUpdate:modelValue":t[0]||(t[0]=e=>p.value=e),color:"primary",label:"Введите Ваш сид",rules:[e=>e&&e.length>0||"Это обязательное поле",e=>y(e)||"Введен не корректный сид"]},null,8,["modelValue","rules"]),y(p.value)?((0,n.wg)(),(0,n.iD)("div",S,[(0,n._)("div",q,[(0,n.Wm)(s,{showDigits:!0,onPincode_ready:f})])])):(0,n.kq)("",!0)]))}}};var C=a(24455),W=a(13119),L=a(69984),P=a.n(L);const Q=D,U=Q;P()(D,"components",{QBtn:C.Z,QInput:W.Z});var I=a(86970);const Z={key:0,class:""},J=(0,n._)("p",{class:"text-weight-bold text-center text-h6"},"Дополнительные соглашения",-1),N=(0,n._)("p",{class:"text-weight-bold"},"Убедитесь, что вы со всем согласны:",-1),O=["innerHTML"],V=(0,n._)("p",null,[(0,n._)("a",{target:"_blank",href:"https://wallet.rupay.pro/rupay_user_agreement.pdf"},"Пользовательское соглашение")],-1),j={key:1,class:""},z={key:2,class:""},A=(0,n._)("p",null,"Ваш сид:",-1),B={style:{"word-break":"break-all"},class:"text-caption bg-grey-3 q-pa-md"},R=(0,n._)("p",{class:"text-caption text-negative q-pa-md text-weight-medium"}," Скопируйте или запишите ваш сид (секретный ключ) и сохраните его в максимально защищенном месте. Ни в коем случае не делитесь и никому не сообщайте ваш сид (секретный ключ)!!! ",-1),T={name:"Register",emits:["openLogin"],setup(e,{emit:t}){const a=(0,c.t)(),s=(0,u.tv)(),l=b(),d=(0,o.iH)(1),g=(0,o.iH)(""),v=((0,o.iH)(!0),(0,o.iH)(!1)),m=(0,o.iH)(!1);let _=(0,o.iH)(null);const w=(0,o.iH)([{agree:!1,text:" Я согласен с тем, что доступ к сиду и ключам, имеется только у меня.\n     При утере сида, доступ к счетам  будет <strong>невозможно</strong> восстановить "},{agree:!1,text:" Я согласен с тем, что <strong>при передаче сида</strong>  третьим лицам,\n    я могу <strong>лишиться всех средств</strong> находящихся на счетах "},{agree:!1,text:"Я <strong>прочитал и согласен</strong> с пользовательским соглашением об общих условиях использования мобильного платежного приложения «RUPAY» "}]),f=(0,n.Fl)((()=>w.value[0].agree&&w.value[1].agree&&w.value[2].agree));function h(){t("openLogin")}async function y(e){g.value=e,await x()}async function x(){v.value=!v.value,_.value=await p.EraChain.Crypt.generateSeed(),v.value=!v.value,d.value=3}async function k(){v.value=!v.value;const e=(0,r.d)({seed:_.value,password:g.value});await a.login(_.value,e);const t=localStorage.getItem("addresses");await l.connectWS(JSON.parse(t)[0].address),await s.push({name:"wallet_index"}),v.value=!v.value}async function S(){await(0,i.Q)(_.value,"positive","Сид скопирован"),m.value=!0}return(e,t)=>{const a=(0,n.up)("q-toggle"),s=(0,n.up)("btn"),l=(0,n.up)("pin-code"),i=(0,n.up)("q-btn");return(0,n.wg)(),(0,n.iD)(n.HY,null,[1===d.value?((0,n.wg)(),(0,n.iD)("div",Z,[J,N,((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(w.value,((e,t)=>((0,n.wg)(),(0,n.j4)(a,{modelValue:w.value[t].agree,"onUpdate:modelValue":e=>w.value[t].agree=e,"checked-icon":"check",color:"green","unchecked-icon":"clear",class:"text-caption q-mb-md",style:{"line-height":"110%"}},{default:(0,n.w5)((()=>[(0,n._)("p",{class:"no-margin",innerHTML:e.text},null,8,O)])),_:2},1032,["modelValue","onUpdate:modelValue"])))),256)),V,(0,o.SU)(f)?((0,n.wg)(),(0,n.j4)(s,{key:0,label:"Продолжить",onClick:t[0]||(t[0]=e=>d.value=2),type:"submit",outline:!1})):(0,n.kq)("",!0)])):(0,n.kq)("",!0),2===d.value?((0,n.wg)(),(0,n.iD)("div",j,[(0,n.Wm)(l,{showDigits:!0,onPincode_ready:y}),(0,n._)("div",{class:"text-center q-mt-md"},[(0,n._)("p",{class:"text-caption no-margin",onClick:h},"У меня есть сид")])])):(0,n.kq)("",!0),3===d.value?((0,n.wg)(),(0,n.iD)("div",z,[A,(0,n._)("p",B,(0,I.zw)((0,o.SU)(_)),1),(0,n.Wm)(i,{rounded:"",outline:"",onClick:S,"no-caps":"",label:"Скопировать сид",unelevated:"",color:"primary",class:"full-width q-mb-md"}),R,(0,n.Wm)(s,{label:m.value?"Продолжить":"Для продолжения скопируйте сид",disabled:!m.value,is_loading:v.value,onClick:k,type:"submit",outline:!1},null,8,["label","disabled","is_loading"])])):(0,n.kq)("",!0)],64)}}};var F=a(23175);const Y=T,E=Y;P()(T,"components",{QToggle:F.Z,QBtn:C.Z});const G={name:"IndexPage",components:{Register:E,Login:U},preFetch({redirect:e,router:t}){localStorage.getItem("seed")},setup(){const e=(0,o.iH)(!0),t=(0,o.iH)(!1),a=localStorage.getItem("hash");function n(e){t.value=e.val}function s(a){t.value=!1,e.value=!0}return{loginActive:e,is_seed_good:t,hash:a,setSeed:n,openLogin:s}}};var M=a(11639),K=a(69885);const $=(0,M.Z)(G,[["render",l]]),X=$;P()(G,"components",{QPage:K.Z,QBtn:C.Z})}}]);